<HTML>
<!-- THIS PAGE IS AUTOMATICALLY GENERATED.  DO NOT EDIT. -->
<!-- Fri Jan 21 20:05:34 2000 -->
<!-- USING HT2HTML 1.1 -->
<!-- SEE http://www.python.org/~bwarsaw/software/pyware.html -->
<!-- User-specified headers:
Title: Compiling Python Source to Real Java Classes

-->

<HEAD>
<TITLE>Compiling Python Source to Real Java Classes</TITLE>

</HEAD>
<BODY BGCOLOR="#ffffff" TEXT="#000000"
      TOPMARGIN="0" LEFTMARGIN="0" MARGINWIDTH="0" MARGINHEIGHT="0"
      LINK="#0000bb"  VLINK="#551a8b"
      ALINK="#ff0000">
<!-- start of page table -->
<TABLE WIDTH="100%" BORDER=0 CELLSPACING=0 CELLPADDING=0>
<!-- start of banner row -->
<TR>
<!-- start of corner cells -->
<TD WIDTH=150 VALIGN=CENTER BGCOLOR="#cdb7b5">

<center>
    <a href="http://www.jpython.org/">
    <img border=0 src="./images/jpython-new-small.gif"></a></center> </TD>
<TD WIDTH=15 BGCOLOR="#cdb7b5">&nbsp;&nbsp;</TD><!--spacer-->
<!-- end of corner cells -->
<!-- start of banner -->
<TD WIDTH="90%" BGCOLOR="#cdb7b5">
<!-- start of site links table -->
<TABLE WIDTH="100%" BORDER=0
CELLSPACING=0 CELLPADDING=2
       COLS=2 ROWS=2 BGCOLOR="#ffffff">
<TR>
    <TD BGCOLOR="#cdb7b5">
<a href="http://www.jpython.org/">Home</a>
    </TD>
    <TD BGCOLOR="#cdb7b5">
<a href="http://www.python.org/">www.python.org</a>
    </TD>
</TR><TR>
    <TD BGCOLOR="#cdb7b5">
<a href="http://www.jpython.org/download.html">Download</a>
    </TD>
    <TD BGCOLOR="#cdb7b5">
<a href="./index.html">Documentation</a>
    </TD>
</TR>
</TABLE><!-- end of site links table -->

</TD><!-- end of banner -->
</TR><!-- end of banner row -->
<TR><!-- start of sidebar/body row -->
<!-- start of sidebar cells -->
<TD WIDTH=150 VALIGN=TOP BGCOLOR="#cdb7b5">
<!-- start of sidebar table -->
<TABLE WIDTH="100%" BORDER=0 CELLSPACING=0 CELLPADDING=3
       BGCOLOR="#ffffff">
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Documentation
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="./index.html">Overview</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="whatis.html">Executive Summary</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="interpreter.html">Invoking JPython</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="registry.html">JPython Registry</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="embedding.html">Embedding</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="compile.html">Compiling JPython from source</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Working with Java
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="usejava.html">The Basics</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="properties.html">JavaBean Properties</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="jarray.html">Java arrays</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="subclassing.html">Subclassing</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<b>Building applets, servlets, beans...</b>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Python Docs (exits)
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/doc/tut/tut.html">Python Tutorial</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/doc/lib/lib.html">Library Reference</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Other
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="differences.html">JPython vs. CPython</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="faq.html">JPython FAQ</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/pipermail/jpython-interest/">List Archives</A> (exit)
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/workshops/1997-10/proceedings/hugunin.html">JPython paper</A> (exit)
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">&nbsp;
<TR><TD BGCOLOR="#660099"><B><FONT COLOR="#ffffff">
Email Us
</FONT></B></TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="mailto:jpython@python.org">jpython@python.org</A>
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
&nbsp;
</TD></TR>
<TR><TD BGCOLOR="#cdb7b5">
<A HREF="http://www.python.org/">
<center>
    <img border=0 src="./images/PythonPoweredSmall.gif"></center>
</A>
</TD></TR>
</TABLE><!-- end of sidebar table -->

</TD>
<TD WIDTH=15>&nbsp;&nbsp;</TD><!--spacer-->
<!-- end of sidebar cell -->
<!-- start of body cell -->
<TD VALIGN=TOP WIDTH="90%"><BR>
<h3>Compiling Python Source to Real Java Classes - jpythonc</h3>

<P>The previous section describes how Python classes can be created
that subclass from Java classes.  This works very well when you want
to pass a Python class into Java from JPython.  This is not adequate
for building real Java ".class" files that implement a Java class and
can be passed directly to Java programs.  This sort of functionality
is required to build applets, servlets, or JavaBeans in JPython that
can be used exactly like their Java equivalents.  It is also very
valuable for users who wish to subclass Python classes in Java.</P>

<P>In order to build a real java class from a Python class, you will
use the <tt>jpythonc</tt> tool.  A script called "jpythonc" should
have been installed in the JPython installation directory when you
installed the package.  If it was not, it can be invoked as follows:
"jpython&nbsp;Tools\jpythonc\jpythonc.py".</P>

<p>JPython 1.1 has a new version of the jpythonc tool, which generates 
actual Java source code, and then invokes a Java compiler over this
source code to create the .class files.  Thus, you will need access to 
a Java compiler in order to use jpythonc.  It is recommended that you
use Sun's standard <tt>javac</tt> compiler, or IBM's excellent
<tt>jikes</tt> compiler.  Specifically, the Microsoft SDK <tt>jvc</tt> 
compiler is not recommended.

<P>Invoke jpythonc like this:

<P><B>jpythonc [options] [module]*</b>

<p>Options are given in the table below.  Note that jpythonc now uses
the standard Python <tt>getopt</tt> module, meaning that both long and 
short forms of the options are available.  The old option names still
work, and are described below, but noted as
<font size=-1 color="blue">deprecated</font> and will be removed in a
future version.

<p><TABLE BORDER="1">
<TR>
    <td><b>--package</b> <em>package</em>
	<br><b>-p</b> <em>package</em>
	<br><font size=-1 color="blue"><b>-package</b> <em>package</em></font>
    </td>
    <td>Put all compiled code into the named Java package.
</tr><tr>
    <TD><B>--jar</B> <em>jarfile</em>
	<br><b>-j</b> <em>jarfile</em>
	<br><font size=-1 color="blue"><b>-jar</b> <em>jarfile</em></font>
    </td>
    <TD>Specifies a .jar file to create and put the results of the
	freeze into.  Implies the <b>--deep</b> option.
</tr><tr>
    <TD><B>--deep</B>
	<br><b>-d</b>
	<br><font size=-1 color="blue"><b>-deep</b></font>
    </td>
    <TD>Compile all Python dependencies of the module. This is used
	for creating applets.</TD>
</TR><TR>
    <TD><B>--core</B>
	<br><b>-c</b>
	<br><font size=-1 color="blue"><b>-core</b></font>
    </td><TD>Include the core JPython libraries (about 130K).  Needed for
	applets since Netscape doesn't yet support multiple archives.
	Implies the <b>--deep</b> option.
</TR><TR>
    <TD><b>--all</B>
	<br><b>-a</b>
	<br><font size=-1 color="blue"><b>-all</b></font>
    </td><TD>Include all of the JPython libraries (everything in core +
	compiler and parser).  Implies the <b>--deep</b> option.
</TR><TR>
    <TD><b>--bean</b> <em>jarfile</em>
	<br><b>-b</b> <em>jarfile</em>
	<br><font size=-1 color="blue"><b>-bean</b> <em>jarfile</em></font>
    </td><TD>Compile into <em>jarfile</em>, including the correct manifest for
	the bean.
</TR><TR>
    <td><b>--addpackages&nbsp;<em>pkgs</em>
	<br>-A <em>pkgs</em>
	<br><font size=-1 color="blue"><b>-addpackages</b>
	    <em>pkgs</em></font>
    </td><td>Include Java dependencies from this list of packages.
	Default is <tt>org.python.modules</tt> and
	<tt>com.oroinc.text.regex</tt>.
</TR><TR>
    <TD><B>--workdir</B> <em>directory</em>
	<br><B>-w</B> <em>directory</em>
	<br><font size=-1 color="blue"><b>-workdir</b>
	    <em>directory</em></font>
    </td><TD>Specify the working directory where the generated Java
	source code is placed.  Default is "./jpywork"
</tr><tr>
    <td><b>--skip</b> <em>modules</em>
	<br><b>-s</b> <em>modules</em>
	<br><font size=-1 color="blue"><b>-skip</b> <em>modules</em></font>
    </td><td>Don't include any of these modules in compilation.  This
	is a comma-separated list of modules.
</tr><tr>
    <td><b>--compiler</b> <em>path</em>
	<br><b>-C</b> <em>path</em>
	<br><font size=-1 color="blue"><b>-compiler</b> <em>path</em></font>
    </td><td>Use a different compiler than `standard' javac.  If this
	is set to "NONE" then compile ends with the generation of the
	Java source file.  Alternatively, you can set the property
	<tt>python.jpythonc.compiler</tt> in the
	<a href="registry.html">registry</a>.
</tr><tr>
    <td><b>--compileropts</b> <em>options</em>
	<br><b>-J</b> <em>options</em>
    </td><td>Options passed directly to the Java compiler.
	Alternatively, you can set the property
	<tt>python.jpythonc.compileropts</tt> in the
	<a href="registry.html">registry</a>.
</tr><tr>
    <td><b>--falsenames</b> <em>names</em>
	<br><b>-f</b> <em>names</em>
	<br><font size=-1 color="blue"><b>-falsenames</b> <em>names</em></font>
    </td><td>A comma-separated list of names that are always false.  Can
	be used to short-circuit if clauses.
</tr><tr>
    <td><b>--help</b>
	<br><b>-h</b>
    </td><td>Print a usage message and exit.
</TR><TR>
    <TD>[module]*</TD>
    <TD>A list of Python modules to freeze.  Can be either modules
	names that are on the <tt>python.path</tt> or .py files</TD>
</TR>
</TABLE>

<p>The Python module must contain a Python class with the same name as
the module, and that Python class must subclass exactly one Java class
or interface.  The real Java class created will be a subclass of
whatever Java class is subclassed.


</TD><!-- end of body cell -->
</TR><!-- end of sidebar/body row -->
</TABLE><!-- end of page table -->
<!-- start of continued wide-body text -->

<h3>Examples</h3>

<P>On my Windows NT machine, I used the following command to create
the file appletdemo.jar (containing all of the applet demos on the web
site, as well as the core JPython libraries):</P>

<PRE>c:\jpython\Demo\applet&gt; jpythonc -core -deep -jar appletdemo.jar *.py</PRE>

<P>To generate a skeleton class to allow a Python class to be used as
java.awt.Component in a Java gui program, I used the following
command:</P>

<PRE>c:\jpython\Demo\javaclasses&gt; jpythonc Graph.py</PRE>

<P>To generate a JPython-based bean I do the following:</P>

<PRE>c:\jpython\Demo\bean&gt; jpythonc -deep -bean f2c.jar conversion.FahrenheitToCelsius</PRE>

<P>To use this with SUN's BDK, I do the following (the important steps
are to make the bean and the JPython libraries known to the tool).</P>

<ol>
    <li>modify BDK\beanbox\run.bat (or run.sh) to include the
	jpython\JavaCode in the CLASSPATH
    <li>copy f2c.jar to BDK\jars
</ol>

<P>You should now be able to access the FahrenheitToCelsius bean from
SUN's BeanBox (or other Bean-aware tool).

<!-- end of continued wide-body text -->
</BODY></HTML>
